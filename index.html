<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LimitLab - Complete SM015 Learning Platform</title>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }

body { 
  font-family: 'Segoe UI', Tahoma, sans-serif; 
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
}

header { 
  background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460); 
  color: white; 
  padding: 50px 20px; 
  text-align: center; 
  box-shadow: 0 8px 30px rgba(0,0,0,0.3);
  border-bottom: 4px solid #4a69bd;
}

header h1 { 
  font-size: 48px; 
  margin-bottom: 15px; 
  text-shadow: 2px 2px 8px rgba(0,0,0,0.5);
  letter-spacing: 2px;
}

header p {
  font-size: 18px;
  opacity: 0.9;
  margin-top: 10px;
}

nav { 
  background: rgba(255,255,255,0.95); 
  padding: 20px 15px; 
  box-shadow: 0 4px 20px rgba(0,0,0,0.15); 
  position: sticky; 
  top: 0; 
  z-index: 100; 
  text-align: center;
  backdrop-filter: blur(10px);
}

nav button { 
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white; 
  border: none; 
  padding: 14px 20px; 
  margin: 5px; 
  border-radius: 25px; 
  cursor: pointer; 
  font-size: 14px; 
  font-weight: 600;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(102,126,234,0.3);
}

nav button:hover { 
  transform: translateY(-3px) scale(1.05); 
  box-shadow: 0 6px 20px rgba(102,126,234,0.5);
}

nav button.active { 
  background: linear-gradient(135deg, #1a1a2e, #0f3460);
  transform: translateY(-2px);
  box-shadow: 0 6px 25px rgba(0,0,0,0.4);
}

.container { 
  max-width: 1000px; 
  margin: 40px auto; 
  padding: 0 20px; 
}

section { 
  background: white; 
  padding: 40px; 
  margin-bottom: 30px; 
  border-radius: 20px; 
  box-shadow: 0 10px 40px rgba(0,0,0,0.15); 
  display: none; 
}

section.active { 
  display: block; 
  animation: fadeIn 0.6s ease-out; 
}

@keyframes fadeIn { 
  from { opacity: 0; transform: translateY(30px); } 
  to { opacity: 1; transform: translateY(0); } 
}

h2 { 
  color: #1a1a2e; 
  border-left: 6px solid #667eea; 
  padding-left: 20px; 
  margin-bottom: 30px; 
  font-size: 32px;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
}

h3 { 
  color: #0f3460; 
  margin: 30px 0 20px 0; 
  font-size: 24px;
  border-bottom: 2px solid #e0e0e0;
  padding-bottom: 10px;
}

.def-box { 
  background: linear-gradient(135deg, #e3f2fd, #bbdefb); 
  padding: 25px; 
  border-radius: 15px; 
  border-left: 5px solid #2196F3; 
  margin: 25px 0; 
  font-size: 16px; 
  line-height: 1.8;
  box-shadow: 0 4px 15px rgba(33,150,243,0.2);
}

.ex-box { 
  background: #f8f9fa; 
  border-left: 5px solid #667eea; 
  padding: 25px; 
  margin: 25px 0; 
  border-radius: 15px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.08);
}

.notation { 
  background: linear-gradient(135deg, #fff3e0, #ffe0b2); 
  padding: 25px; 
  border-radius: 15px; 
  text-align: center; 
  font-size: 22px; 
  font-family: 'Courier New', monospace; 
  margin: 25px 0; 
  border: 3px solid #ff9800;
  box-shadow: 0 4px 15px rgba(255,152,0,0.2);
  font-weight: bold;
}

.warn-box { 
  background: linear-gradient(135deg, #ffebee, #ffcdd2); 
  padding: 25px; 
  border-radius: 15px; 
  border-left: 5px solid #f44336; 
  margin: 25px 0; 
  color: #c62828; 
  font-weight: bold;
  box-shadow: 0 4px 15px rgba(244,67,54,0.2);
}

.step-box { 
  background: linear-gradient(135deg, #e8f5e9, #c8e6c9); 
  padding: 25px; 
  border-radius: 15px; 
  margin: 20px 0; 
  border-left: 5px solid #4caf50;
  box-shadow: 0 4px 15px rgba(76,175,80,0.2);
}

.hint-box { 
  background: linear-gradient(135deg, #fff9c4, #fff59d); 
  padding: 25px; 
  border-radius: 15px; 
  margin: 25px 0; 
  border-left: 5px solid #fbc02d;
  box-shadow: 0 4px 15px rgba(251,192,45,0.2);
}

.highlight { 
  background: #ffeb3b; 
  padding: 4px 10px; 
  border-radius: 6px; 
  font-weight: bold;
  box-shadow: 0 2px 8px rgba(255,235,59,0.4);
}

table { 
  width: 100%; 
  border-collapse: collapse; 
  margin: 25px 0;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  border-radius: 10px;
  overflow: hidden;
}

table th, table td { 
  border: 2px solid #e0e0e0; 
  padding: 15px; 
  text-align: center; 
}

table th { 
  background: linear-gradient(135deg, #667eea, #764ba2); 
  color: white;
  font-weight: 600;
}

table tr:nth-child(even) {
  background: #f8f9fa;
}

table tr:hover {
  background: #e3f2fd;
  transition: 0.3s;
}

/* GAME STYLES */
.game-tab {
  background: white !important;
  color: #667eea !important;
  border: 2px solid #667eea !important;
  margin: 5px !important;
}

.game-tab.active {
  background: linear-gradient(135deg, #667eea, #764ba2) !important;
  color: white !important;
  border-color: transparent !important;
}

.game-container {
  display: none;
  margin-top: 30px;
}

.game-container.active-game {
  display: block;
  animation: fadeIn 0.4s ease;
}

.game-stats {
  display: flex;
  justify-content: space-around;
  margin: 25px 0;
  padding: 20px;
  background: linear-gradient(135deg, #f8f9fa, #e9ecef);
  border-radius: 15px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.stat-item {
  text-align: center;
}

.stat-label {
  display: block;
  font-size: 14px;
  color: #666;
  margin-bottom: 5px;
}

.stat-value {
  display: block;
  font-size: 28px;
  font-weight: bold;
  color: #1a1a2e;
}

.game-board {
  background: white;
  padding: 30px;
  border-radius: 15px;
  border: 3px solid #e0e0e0;
  margin: 20px 0;
}

.game-question {
  font-size: 24px;
  font-weight: bold;
  text-align: center;
  margin-bottom: 25px;
  color: #1a1a2e;
  padding: 20px;
  background: linear-gradient(135deg, #fff3e0, #ffe0b2);
  border-radius: 12px;
}

.game-options {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 15px;
  margin-top: 20px;
}

.game-options button {
  padding: 20px;
  font-size: 20px;
  border-radius: 12px;
  transition: all 0.3s;
}

.game-options button:hover {
  transform: translateY(-5px) scale(1.05);
}

.game-result {
  margin-top: 25px;
  padding: 20px;
  border-radius: 12px;
  text-align: center;
  font-size: 18px;
  font-weight: bold;
  display: none;
}

.game-result.show {
  display: block;
  animation: slideIn 0.4s;
}

@keyframes slideIn {
  from { opacity: 0; transform: scale(0.9); }
  to { opacity: 1; transform: scale(1); }
}

.result-correct {
  background: linear-gradient(135deg, #d4edda, #c3e6cb);
  color: #155724;
  border: 3px solid #28a745;
}

.result-wrong {
  background: linear-gradient(135deg, #f8d7da, #f5c6cb);
  color: #721c24;
  border: 3px solid #dc3545;
}

.result-final {
  background: linear-gradient(135deg, #fff3cd, #ffeaa7);
  color: #856404;
  border: 3px solid #ffc107;
  font-size: 22px;
}

/* MATCH GAME */
.match-board {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 30px;
  padding: 20px;
}

.match-column h4 {
  text-align: center;
  margin-bottom: 15px;
  color: #667eea;
  font-size: 20px;
}

.match-item {
  background: white;
  border: 3px solid #e0e0e0;
  padding: 20px;
  margin: 10px 0;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s;
  text-align: center;
  font-size: 18px;
  font-weight: 600;
}

.match-item:hover {
  transform: scale(1.05);
  border-color: #667eea;
  box-shadow: 0 4px 15px rgba(102,126,234,0.3);
}

.match-item.selected {
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  border-color: transparent;
  transform: scale(1.05);
}

.match-item.matched {
  background: linear-gradient(135deg, #d4edda, #c8e6c9);
  border-color: #28a745;
  pointer-events: none;
  opacity: 0.7;
}

.match-item.wrong {
  animation: shake 0.5s;
  border-color: #dc3545;
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-10px); }
  75% { transform: translateX(10px); }
}

/* RACE GAME */
.race-track {
  background: linear-gradient(135deg, #f8f9fa, #e9ecef);
  height: 80px;
  border-radius: 15px;
  position: relative;
  margin: 20px 0;
  overflow: hidden;
  border: 3px solid #667eea;
}

.race-car {
  font-size: 40px;
  position: absolute;
  left: 0%;
  top: 50%;
  transform: translateY(-50%);
  transition: left 0.3s ease;
}

.finish-line {
  font-size: 50px;
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
}

button {
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  border: none;
  padding: 14px 28px;
  border-radius: 25px;
  cursor: pointer;
  font-size: 15px;
  font-weight: 600;
  transition: all 0.3s;
  box-shadow: 0 4px 15px rgba(102,126,234,0.3);
}

button:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 20px rgba(102,126,234,0.5);
}

button:disabled {
  background: #ccc;
  cursor: not-allowed;
  transform: none;
}

.quiz-fb { 
  padding: 20px; 
  margin: 20px 0; 
  border-radius: 15px; 
  display: none; 
  font-weight: bold;
  font-size: 16px;
}

.quiz-fb.show { 
  display: block; 
  animation: slideIn 0.4s ease-out;
}

.correct { 
  background: linear-gradient(135deg, #e8f5e9, #c8e6c9); 
  color: #2e7d32; 
  border: 3px solid #4caf50;
  box-shadow: 0 4px 15px rgba(76,175,80,0.3);
}

.incorrect { 
  background: linear-gradient(135deg, #ffebee, #ffcdd2); 
  color: #c62828; 
  border: 3px solid #f44336;
  box-shadow: 0 4px 15px rgba(244,67,54,0.3);
}

@keyframes celebrate {
  0%, 100% { transform: scale(1) rotate(0deg); }
  25% { transform: scale(1.2) rotate(-5deg); }
  75% { transform: scale(1.2) rotate(5deg); }
}

.celebrate {
  animation: celebrate 0.6s ease;
}

canvas { 
  max-width: 100%; 
  display: block;
  margin: 0 auto;
}

/* IMAGE STYLES */
.asymptote-images {
  display: flex;
  justify-content: center;
  gap: 25px;
  flex-wrap: wrap;
  margin: 30px 0;
}

.asymptote-images figure {
  text-align: center;
}

.asymptote-images img {
  width: 320px;
  max-width: 100%;
  border-radius: 15px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.25);
}

.asymptote-images figcaption {
  margin-top: 10px;
  font-size: 15px;
  color: #555;
  font-weight: 600;
}

.continuity-images {
  display: flex;
  justify-content: center;
  gap: 25px;
  flex-wrap: wrap;
  margin: 30px 0;
}

.continuity-images figure {
  text-align: center;
}

.continuity-images img {
  width: 320px;
  max-width: 100%;
  border-radius: 15px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.25);
}

.continuity-images figcaption {
  margin-top: 10px;
  font-size: 15px;
  color: #555;
  font-weight: 600;
}

.piecewise-images {
  display: flex;
  justify-content: center;
  margin: 30px 0;
}

.piecewise-images figure {
  text-align: center;
}
  
.piecewise-images img {
  width: 320px;
  max-width: 100%;
  border-radius: 15px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.25);
}

.piecewise-images figcaption {
  margin-top: 10px;
  font-size: 15px;
  color: #555;
  font-weight: 600;
}
  
 .absolute-images figure {
  text-align: center;
} 
  
 .absolute-images img {
  width: 320px;
  max-width: 100%;
  border-radius: 15px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.25);
}

.absolute-images figcaption {
  margin-top: 10px;
  font-size: 15px;
  color: #555;
  font-weight: 600;
}

  .infinite-images {
  display: flex;
  justify-content: center;
  margin: 30px 0;
}

.infinite-images figure {
  text-align: center;
}

  .infinite-images img {
  width: 320px;
  max-width: 100%;
  border-radius: 15px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.25);
}

.infinite-images figcaption {
  margin-top: 10px;
  font-size: 15px;
  color: #555;
  font-weight: 600;
}
  
@media (max-width: 768px) {
  header h1 { font-size: 36px; }
  .match-board { grid-template-columns: 1fr; }
  .game-options { grid-template-columns: 1fr; }
  nav button { padding: 12px 16px; font-size: 13px; }
  section { padding: 25px; }
  h2 { font-size: 26px; }
  .asymptote-images, .continuity-images { flex-direction: column; align-items: center; }
}
  
</style>
</head>
<body>

<header>
  <h1>üéì LimitLab</h1>
  <p>Complete Interactive Learning Platform for Limits - SM015</p>
</header>

<nav>
  <button onclick="showSec('intro')" class="active">üìö Introduction</button>
  <button onclick="showSec('types')">üìê Types of Limits</button>
  <button onclick="showSec('methods')">üîß Methods</button>
  <button onclick="showSec('infinity')">‚ôæÔ∏è Limits at Infinity</button>
  <button onclick="showSec('asymptotes')">üìä Asymptotes</button>
  <button onclick="showSec('continuity')">üîó Continuity</button>
  <button onclick="showSec('quiz')">‚úÖ Quiz</button>
  <button onclick="showSec('games')">üéÆ Games</button>
</nav>

<div class="container">

<!-- INTRODUCTION -->
<section id="intro" class="active">
  <h2>üìò What is a Limit?</h2>
  
  <div class="def-box">
    <p>A <strong>limit</strong> describes the value that a function approaches as the input value approaches a certain number. Limits help us understand the behavior of functions near a point, even if the function doesn't actually reach that point.</p>
  </div>

  <div class="notation">lim<sub>x‚Üía</sub> f(x) = L</div>
  <p style="text-align: center; margin: 20px 0; font-size: 17px;"><em>"The limit of f(x) as x approaches a equals L"</em></p>

  <div class="hint-box">üí° <strong>Key Insight:</strong> Sometimes we can't work something out directly... but we can see what it should be as we get <strong>closer and closer</strong>!</div>

  <h3>üîç The Classic Problem</h3>
  
 <div class="ex-box">
  <p style="font-weight: bold; font-size: 18px;">
    Example: Evaluate 
    $$\lim_{x \to 3} \frac{x^2 - 9}{x - 3}$$
  </p>

  <div class="step-box">
    <strong>Step 1:</strong> Approach x = 3 from both sides
  </div>
</div>


  <h3>üìä The Approach Table</h3>
  <table>
    <tr><th>x</th><th>(x¬≤ - 9)/(x - 3)</th></tr>
    <tr><td>2.0</td><td>5.00000</td></tr>
    <tr><td>2.9</td><td>5.90000</td></tr>
    <tr><td>2.99</td><td>5.99000</td></tr>
    <tr><td>2.999</td><td>5.99900</td></tr>
    <tr><td>2.9999</td><td>5.99990</td></tr>
    <tr><td>2.99999</td><td>5.99999</td></tr>
    <tr><td>3.0</td><td>6.0</td></tr>
    <tr><td>3.00001</td><td>6.00001</td></tr>
    <tr><td>3.0001</td><td>6.00010</td></tr>
    <tr><td>3.001</td><td>6.00100</td></tr>
    <tr><td>3.01</td><td>6.01000</td></tr>
    <tr><td>3.1</td><td>6.10000</td></tr>
    <tr style="background: linear-gradient(135deg, #4caf50, #66bb6a); color: white;"><td>‚Üí 3 ‚Üê</td><td>‚Üí 6 ‚Üê</td></tr>
  </table>
  
</section>

<!-- TYPES OF LIMITS -->
<section id="types">
  <h2>üìê Types of Limits</h2>

  <h3>1. One-Sided Limits</h3>
  <div class="ex-box">
    <p><strong>Left-hand limit:</strong> lim<sub>x‚Üía‚Åª</sub> f(x) - approaching from the left (values less than a)</p>
    <p><strong>Right-hand limit:</strong> lim<sub>x‚Üía‚Å∫</sub> f(x) - approaching from the right (values greater than a)</p>
    <p><strong>Limit exists</strong> if and only if: lim<sub>x‚Üía‚Åª</sub> f(x) = lim<sub>x‚Üía‚Å∫</sub> f(x)</p>
  </div>

  <h3>2. Piecewise Function Example</h3>
  <div class="ex-box">
  <p>
$$
h(x) =
\begin{cases}
4 - x^2, & x \le 1 \\
2 + x^2, & x > 1
\end{cases}
$$
</p>

   <div class="piecewise-images">
  <figure>
    <img src="./piecewise.jpeg" alt="Piecewise Function">
    <figcaption>Piecewise Function Graph</figcaption>
  </figure>
</div>
    
    <div style="text-align:center;margin:15px 0;">
      <span style="display:inline-block;width:15px;height:15px;background:#ff6b6b;border-radius:50%;margin:0 5px;"></span> Left: 4-x¬≤
      <span style="display:inline-block;width:15px;height:15px;background:#4ecdc4;border-radius:50%;margin:0 5px 0 20px;"></span> Right: 2+x¬≤
      <span style="display:inline-block;width:15px;height:15px;background:#ffd93d;border-radius:50%;margin:0 5px 0 20px;"></span> Point (1, 3)
    </div>

    <div class="step-box">
      <strong>Left-hand limit:</strong> lim<sub>x‚Üí1‚Åª</sub> (4-x¬≤) = 3<br>
      <strong>Right-hand limit:</strong> lim<sub>x‚Üí1‚Å∫</sub> (2+x¬≤) = 3<br>
      <strong>Value at x=1:</strong> h(1) = 3
    </div>
    <div class="notation">All equal 3 ‚Üí Function is CONTINUOUS at x=1 ‚úì</div>
  </div>

  <h3>3. Absolute Value Limits</h3>
  <div class="ex-box">
     <img src="./absolutegraph.jpeg" alt="Limit for absolute value" width="300">
        <img src="./absolute.png" alt="Limit for absolute value" width="300">
    <p><strong>Example:</strong> lim<sub>x‚Üí3</sub> |x - 3|</p>
    <div class="step-box">
      lim<sub>x‚Üí3‚Åª</sub> -(x-3) = 0<br>
      lim<sub>x‚Üí3‚Å∫</sub> (x-3) = 0<br>
      Therefore: lim<sub>x‚Üí3</sub> |x-3| = 0
    </div>
  </div>

  <h3>4. Infinite Limits</h3>
  <div class="ex-box">
    <img src="./infinite.jpeg" alt="Infinite Limit" width="300">
    <p>When a function grows without bound as x approaches a value.</p>
    <div class="notation">lim<sub>x‚Üí0</sub> 1/x¬≤ = ‚àû</div>
    <div class="step-box">
    <p>
<strong>Example:</strong>  
$$
\lim_{x \to 4^-} \frac{3}{(x-4)^2} = +\infty
$$
</p>

      As x approaches 4 from the left, the denominator approaches 0, causing the fraction to grow infinitely large.
    </div>
  </div>
</section>

<!-- METHODS -->
<section id="methods">
  <h2>üîß Solution Methods</h2>

 
  <h3>Method 1: Direct Substitution</h3>
  <div class="hint-box">
    <p>When the function is continuous at the point, simply substitute the value of x.</p>
  <p>
<strong>Example:</strong>  
$$
\lim_{x \to 2} \frac{x^2 + 1}{x^2 - 1}
= \frac{4 + 1}{4 - 1}
= \frac{5}{3}
$$
</p>
  </div>
  
  <h3>Method 2: Factorization</h3>
  <div class="ex-box">
     <div class="step-box">
      <strong>Step 1:</strong> Try direct substitution with x = 3
      <div class="notation">
$$
\frac{3^2 - 9}{3 - 3}
= \frac{9 - 9}{0}
= \frac{0}{0}
$$
</div>
    </div>

    <div class="warn-box">‚ö†Ô∏è 0/0 is INDETERMINATE! We cannot determine the answer this way.</div>
  <p><strong>Example:</strong></p>
$$
\lim_{x \to 3} \frac{x^2 - 9}{x - 3}
$$
<p>If cannot directly substitute, try factorization.</p>

<div class="step-box">
$$
\text{Step 1: } x^2 - 9 = (x-3)(x+3)
$$
$$
\text{Step 2: } \frac{(x-3)(x+3)}{x-3} = x+3
$$
$$
\text{Step 3: } 3 + 3 = 6
$$
</div>

<div class="notation"><strong>Answer: 6</strong></div>
  </div>

  <div class="ex-box">
   <p><strong>Example:</strong></p>
$$
\lim_{x \to -3} \frac{x^3 + 27}{x + 3}
$$

<div class="step-box">
$$
\text{Step 1: } x^3 + 27 = (x+3)(x^2 - 3x + 9)
$$
$$
\text{Step 2: } \frac{(x+3)(x^2 - 3x + 9)}{x+3} = x^2 - 3x + 9
$$
$$
\text{Step 3: } (-3)^2 - 3(-3) + 9 = 9 + 9 + 9 = 27
$$
</div>

<div class="notation"><strong>Answer: 27</strong></div>
  </div>

  <h3>Method 3: Conjugate Multiplication</h3>
  <div class="ex-box">
    <p><strong>Example:</strong></p>
$$
\lim_{x \to -1} \frac{\sqrt{2+x}-1}{x+1}
$$
<p>Finding limit using multiplication of conjugates.</p>

<div class="step-box">
$$
\text{Step 1: Multiply by conjugate }
\frac{\sqrt{2+x}+1}{\sqrt{2+x}+1}
$$
$$
\text{Step 2: } (2+x-1)=x+1
$$
$$
\text{Step 3: } \frac{x+1}{(x+1)(\sqrt{2+x}+1)}
= \frac{1}{\sqrt{2+x}+1}
$$
$$
\text{Step 4: } x=-1 \Rightarrow \frac{1}{\sqrt{1}+1}=\frac{1}{2}
$$
</div>

<div class="notation"><strong>Answer: 1/2</strong></div>
  </div>
  
</section>

<!-- LIMITS AT INFINITY -->
<section id="infinity">
  <h2>‚ôæÔ∏è Limits at Infinity</h2>

  <div class="def-box">
    <p><strong>Important Rules:</strong></p>
    <p>‚Ä¢ lim<sub>x‚Üí‚àû</sub> 1/x<sup>n</sup> = 0</p>
    <p>‚Ä¢ lim<sub>x‚Üí-‚àû</sub> 1/x<sup>n</sup> = 0</p>
    <p>‚Ä¢ For ‚àû/‚àû form: Divide by <strong>highest power</strong> in denominator</p>
  </div>

  <h3>Example 1: Basic Rational Function</h3>
  <div class="ex-box">
   <p><strong>Find:</strong></p>
$$
\lim_{x \to \infty} \frac{2x^2+1}{5x^2-2}
$$

<div class="step-box">
$$
\text{Step 1: Divide by } x^2
$$
$$
= \lim_{x \to \infty} \frac{2+\frac{1}{x^2}}{5-\frac{2}{x^2}}
$$
$$
\text{Step 2: As } x \to \infty,\ \frac{1}{x^2} \to 0
$$
$$
= \frac{2}{5}
$$
</div>

<div class="notation"><strong>Answer: 2/5</strong></div>
  </div>

  <h3>Example 2: Square Root Function</h3>
  <div class="ex-box">
   <p><strong>Find:</strong></p>
$$
\lim_{x \to \infty} \sqrt{\frac{2x+1}{5x-2}}
$$

<div class="step-box">
$$
\text{Step 1: Take limit inside square root}
$$
$$
= \sqrt{\lim_{x \to \infty} \frac{2x+1}{5x-2}}
$$
$$
\text{Step 2: Divide by } x
$$
$$
= \sqrt{\frac{2+\frac{1}{x}}{5-\frac{2}{x}}}
$$
$$
\text{Step 3: As } x \to \infty
$$
$$
= \sqrt{\frac{2}{5}}
$$
</div>

<div class="notation"><strong>Answer: ‚àö(2/5)</strong></div>
  </div>
</section>

<!-- ASYMPTOTES -->
<section id="asymptotes">
  <h2>üìä Asymptotes</h2>
<div class="asymptote-images">
  <figure>
    <img src="./vertical.png" alt="Vertical Asymptote">
    <figcaption>Vertical Asymptote (x = a)</figcaption>
  </figure>

  <figure>
    <img src="./horizontal.png" alt="Horizontal Asymptote">
    <figcaption>Horizontal Asymptote (y = b)</figcaption>
  </figure>
</div>

  <h3>Vertical Asymptotes</h3>
  <div class="def-box">
    <p>A line x = a is a vertical asymptote if:</p>
    <p>lim<sub>x‚Üía‚Åª</sub> f(x) = ¬±‚àû or lim<sub>x‚Üía‚Å∫</sub> f(x) = ¬±‚àû</p>
    <p><strong>How to find:</strong> Set denominator = 0 and solve for x</p>
  </div>

<div class="ex-box">
  <p><strong>Example:</strong> \( f(x) = \frac{x+3}{x+2} \)</p>

  <div class="step-box">

  $$
  x + 2 = 0 \;\Rightarrow\; x = -2
  $$

  $$
  \lim_{x \to -2^+} f(x) = +\infty
  $$

  $$
  \lim_{x \to -2^-} f(x) = -\infty
  $$

  $$
  \textbf{Vertical asymptote: } x = -2
  $$

  </div>
</div>


  <h3>Horizontal Asymptotes</h3>
  <div class="def-box">
    <p>A line y = b is a horizontal asymptote if:</p>
    <p>lim<sub>x‚Üí‚àû</sub> f(x) = b or lim<sub>x‚Üí-‚àû</sub> f(x) = b</p>
  </div>

  <div class="ex-box">
     <p><strong>Example:</strong></p>
$$
f(x) = \frac{x}{x-2}
$$

<div class="step-box">
$$
\lim_{x \to \infty} \frac{x}{x-2}
= \lim_{x \to \infty} \frac{1}{1-\frac{2}{x}}
= 1
$$
$$
\text{Horizontal asymptote: } y = 1
$$
$$
\text{Vertical asymptote: } x = 2
$$
</div>
  </div>

  <h3>Practice Problem</h3>
  <div class="ex-box">
   <p><strong>Find the vertical and horizontal asymptotes of:</strong></p>
$$
f(x) = \frac{2x+1}{x-1}
$$

<div class="step-box">
$$
\text{Vertical asymptote: } x-1=0 \Rightarrow x=1
$$
$$
\lim_{x \to \infty} \frac{2x+1}{x-1} = 2
$$
$$
\text{Horizontal asymptote: } y=2
$$
</div>
  </div>
</section>

<!-- CONTINUITY -->
<section id="continuity">
  <h2>üîó Continuity</h2>
<div class="continuity-images">
  <figure>
    <img src="./continuity.png" alt="Continuity at points a,b and c">
    <figcaption>Continuity at points a,b and c</figcaption>
  </figure>

  <figure>
    <img src="./continuous.png" alt="Continuous graph">
    <figcaption>Continuous graph</figcaption>
  </figure>

  <figure>
    <img src="./discontinuous.png" alt="Discontinuous graph">
    <figcaption>Discontinuous graph</figcaption>
  </figure>
</div>
  <div class="def-box">
    <p><strong>A function f(x) is continuous at x = c if:</strong></p>
    <p>1. f(c) exists (function is defined)</p>
    <p>2. lim<sub>x‚Üíc</sub> f(x) exists (limit exists)</p>
    <p>3. lim<sub>x‚Üíc</sub> f(x) = f(c) (limit equals function value)</p>
  </div>

  <h3>Types of Discontinuity</h3>
  <div class="ex-box">
    <p><strong>1. Removable (Hole):</strong> Limit exists but ‚â† f(c) or f(c) undefined</p>
    <p><strong>2. Jump:</strong> Left and right limits exist but are different</p>
    <p><strong>3. Infinite:</strong> Function approaches ¬±‚àû</p>
  </div>

  <h3>Continuity Example</h3>
  <div class="ex-box">
   <p><strong>Is</strong> \( f(x) = \frac{x^2 - 4}{x - 2} \) <strong>continuous at</strong> \( x = 2 \)?</p>

<div class="step-box">

$$
1.\quad f(2) = \frac{0}{0} \;\Rightarrow\; \text{undefined}
$$

$$
2.\quad \lim_{x \to 2} \frac{x^2 - 4}{x - 2}
= \lim_{x \to 2} (x + 2)
= 4
$$

$$
3.\quad \text{Since } f(2) \text{ does not exist, the function is NOT continuous}
$$

$$
\textbf{Type: Removable discontinuity (hole at } x = 2\textbf{)}
$$

</div>
  </div>
</section>

<!-- QUIZ -->
<section id="quiz">
  <h2>‚úÖ Comprehensive Quiz</h2>
  <p style="text-align: center; font-size: 18px; margin-bottom: 30px;">Test your understanding with these 13 questions!</p>

<div class="ex-box">
  <p><strong>Q1:</strong> \( \lim_{x \to 3} \frac{3x+4}{x-2} = ? \)</p>
  <button onclick="checkQ(1,11,this)">11</button>
  <button onclick="checkQ(1,15,this)">15</button>
  <button onclick="checkQ(1,13,this)">13</button>
  <div id="f1" class="quiz-fb"></div>
</div>

<div class="ex-box">
  <p><strong>Q2:</strong> \( \lim_{x \to 2} \frac{x^2+1}{x^2-1} = ? \)</p>
  <button onclick="checkQ(2,'3/5',this)">3/5</button>
  <button onclick="checkQ(2,'5/3',this)">5/3</button>
  <button onclick="checkQ(2,'1',this)">1</button>
  <div id="f2" class="quiz-fb"></div>
</div>

<div class="ex-box">
  <p><strong>Q3:</strong> \( \lim_{x \to -3} \sqrt{2x+8} = ? \)</p>
  <button onclick="checkQ(3,'2',this)">2</button>
  <button onclick="checkQ(3,'0',this)">0</button>
  <button onclick="checkQ(3,'\\sqrt{2}',this)">‚àö2</button>
  <div id="f3" class="quiz-fb"></div>
</div>

<div class="ex-box">
  <p><strong>Q4:</strong> \( \lim_{x \to -2} (x^2 + 3) = ? \)</p>
  <button onclick="checkQ(4,5,this)">5</button>
  <button onclick="checkQ(4,7,this)">7</button>
  <button onclick="checkQ(4,9,this)">9</button>
  <div id="f4" class="quiz-fb"></div>
</div>

<div class="ex-box">
  <p><strong>Q5:</strong> \( \lim_{x \to 3} \frac{x^2-x-6}{3-x} = ? \)</p>
  <button onclick="checkQ(5,5,this)">5</button>
  <button onclick="checkQ(5,0,this)">0</button>
  <button onclick="checkQ(5,-5,this)">-5</button>
  <div id="f5" class="quiz-fb"></div>
</div>

<div class="ex-box">
  <p><strong>Q6:</strong> 
    \( \lim_{x \to 0} \frac{e^x - e^{-x}}{e^{2x} - e^{-2x}} = ? \)
  </p>
  <button onclick="checkQ(6,'1',this)">1</button>
  <button onclick="checkQ(6,'2',this)">2</button>
  <button onclick="checkQ(6,'1/2',this)">1/2</button>
  <div id="f6" class="quiz-fb"></div>
</div>

<div class="ex-box">
  <p><strong>Q7:</strong> 
    \( \lim_{x \to 5} \frac{25-x^2}{3x-12-\sqrt{3}} = ? \)
  </p>
  <button onclick="checkQ(7,'20\\sqrt{3}/3',this)">20‚àö3/3</button>
  <button onclick="checkQ(7,'0',this)">0</button>
  <button onclick="checkQ(7,'-20\\sqrt{3}/3',this)">-20‚àö3/3</button>
  <div id="f7" class="quiz-fb"></div>
</div>

<div class="ex-box">
  <p><strong>Q8:</strong> \( \lim_{x \to \infty} \frac{5x+1}{2x-2} = ? \)</p>
  <button onclick="checkQ(8,'1/2',this)">1/2</button>
  <button onclick="checkQ(8,'5/2',this)">5/2</button>
  <button onclick="checkQ(8,'2/5',this)">2/5</button>
  <div id="f8" class="quiz-fb"></div>
</div>

<div class="ex-box">
  <p><strong>Q9:</strong> 
    \( \lim_{x \to -\infty} \frac{\sqrt{x^2+4}}{x+2} = ? \)
  </p>
  <button onclick="checkQ(9,1,this)">1</button>
  <button onclick="checkQ(9,-1,this)">-1</button>
  <button onclick="checkQ(9,0,this)">0</button>
  <div id="f9" class="quiz-fb"></div>
</div>

<div class="ex-box">
  <p><strong>Q10:</strong> 
    \( \lim_{x \to \infty} \sqrt{\frac{5x+1}{7x-3}} = ? \)
  </p>
  <button onclick="checkQ(10,'2/5',this)">2/5</button>
  <button onclick="checkQ(10,'\\sqrt{5}/2',this)">‚àö5/2</button>
  <button onclick="checkQ(10,'\\sqrt{5/7}',this)">‚àö(5/7)</button>
  <div id="f10" class="quiz-fb"></div>
</div>

<div class="ex-box">
  <p><strong>Q11:</strong> \( \lim_{x \to -3} \frac{x^3+27}{x+3} = ? \)</p>
  <button onclick="checkQ(11,9,this)">9</button>
  <button onclick="checkQ(11,-27,this)">-27</button>
  <button onclick="checkQ(11,27,this)">27</button>
  <div id="f11" class="quiz-fb"></div>
</div>

<div class="ex-box">
  <p><strong>Q12:</strong> \( \lim_{x \to 4^-} \frac{3}{(x-4)^2} = ? \)</p>
  <button onclick="checkQ(12,'-‚àû',this)">-‚àû</button>
  <button onclick="checkQ(12,'0',this)">0</button>
  <button onclick="checkQ(12,'+‚àû',this)">+‚àû</button>
  <div id="f12" class="quiz-fb"></div>
</div>

<div class="ex-box">
  <p><strong>Q13:</strong> 
    For \( f(x) = \frac{x-2}{(x+2)^2} \), find the vertical and horizontal asymptotes.
  </p>
  <button onclick="checkQ(13,'x=1, y=2',this)">x=1, y=2</button>
  <button onclick="checkQ(13,'x=2, y=1',this)">x=2, y=1</button>
  <button onclick="checkQ(13,'x=-2, y=0',this)">x=-2, y=0</button>
  <div id="f13" class="quiz-fb"></div>
</div>

  <div id="score" class="step-box" style="text-align:center;display:none;"></div>
</section>

<!-- GAMES SECTION -->
<section id="games">
  <h2>üéÆ Interactive Games & Challenges</h2>
  
  <div style="text-align: center; margin-bottom: 30px;">
    <button onclick="showGame('speed')" class="game-tab active" id="tab-speed">‚ö° Speed Challenge</button>
    <button onclick="showGame('match')" class="game-tab" id="tab-match">üéØ Match Game</button>
    <button onclick="showGame('identify')" class="game-tab" id="tab-identify">üîç Method Master</button>
    <button onclick="showGame('race')" class="game-tab" id="tab-race">üèÅ Limit Race</button>
  </div>

  <!-- GAME 1: SPEED CHALLENGE -->
  <div id="game-speed" class="game-container active-game">
    <h3>‚ö° Speed Challenge - Answer as many as you can in 60 seconds!</h3>
    <div class="game-stats">
      <div class="stat-item">
        <span class="stat-label">‚è±Ô∏è Time</span>
        <span id="speed-timer" class="stat-value">60</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">üéØ Score</span>
        <span id="speed-score" class="stat-value">0</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">üî• Streak</span>
        <span id="speed-streak" class="stat-value">0</span>
      </div>
    </div>
    
    <div class="game-board">
      <div id="speed-question" class="game-question">Ready to test your speed?</div>
      <div id="speed-options" class="game-options"></div>
    </div>
    
    <div style="text-align: center; margin-top: 20px;">
      <button id="speed-start" onclick="startSpeedGame()" style="font-size: 18px; padding: 15px 40px;">
        üöÄ START GAME
      </button>
    </div>
    
    <div id="speed-result" class="game-result"></div>
  </div>

  <!-- GAME 2: MATCH THE LIMIT -->
  <div id="game-match" class="game-container">
    <h3>üéØ Match the Limit - Connect problems to their answers!</h3>
    <div class="game-stats">
      <div class="stat-item">
        <span class="stat-label">‚úÖ Matches</span>
        <span id="match-score" class="stat-value">0/8</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">üéØ Accuracy</span>
        <span id="match-accuracy" class="stat-value">100%</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">üìä Moves</span>
        <span id="match-moves" class="stat-value">0</span>
      </div>
    </div>
    
    <div class="match-board">
      <div class="match-column">
        <h4>üìù Problems</h4>
        <div class="match-item" onclick="selectMatch(this, 'p1')" data-pair="1">
          lim<sub>x‚Üí2</sub> x¬≤
        </div>
        <div class="match-item" onclick="selectMatch(this, 'p2')" data-pair="2">
          lim<sub>x‚Üí0</sub> 1/x¬≤
        </div>
        <div class="match-item" onclick="selectMatch(this, 'p3')" data-pair="3">
          lim<sub>x‚Üí‚àû</sub> 1/x
        </div>
        <div class="match-item" onclick="selectMatch(this, 'p4')" data-pair="4">
          lim<sub>x‚Üí1</sub> (x¬≤-1)/(x-1)
        </div>
        <div class="match-item" onclick="selectMatch(this, 'p5')" data-pair="5">
          lim<sub>x‚Üí3</sub> (x+1)
        </div>
        <div class="match-item" onclick="selectMatch(this, 'p6')" data-pair="6">
          lim<sub>x‚Üí‚àû</sub> (2x+1)/(5x-2)
        </div>
        <div class="match-item" onclick="selectMatch(this, 'p7')" data-pair="7">
          lim<sub>x‚Üí-3</sub> (x¬≥+27)/(x+3)
        </div>
        <div class="match-item" onclick="selectMatch(this, 'p8')" data-pair="8">
          lim<sub>x‚Üí-2</sub> (x¬≤+3)
        </div>
      </div>
      
      <div class="match-column">
        <h4>üíØ Answers</h4>
        <div class="match-item" onclick="selectMatch(this, 'a1')" data-pair="1">4</div>
        <div class="match-item" onclick="selectMatch(this, 'a2')" data-pair="2">‚àû</div>
        <div class="match-item" onclick="selectMatch(this, 'a3')" data-pair="3">0</div>
        <div class="match-item" onclick="selectMatch(this, 'a4')" data-pair="4">2</div>
        <div class="match-item" onclick="selectMatch(this, 'a5')" data-pair="5">4</div>
        <div class="match-item" onclick="selectMatch(this, 'a6')" data-pair="6">2/5</div>
        <div class="match-item" onclick="selectMatch(this, 'a7')" data-pair="7">27</div>
        <div class="match-item" onclick="selectMatch(this, 'a8')" data-pair="8">7</div>
      </div>
    </div>
    
    <div style="text-align: center; margin-top: 20px;">
      <button onclick="resetMatchGame()">üîÑ Reset Game</button>
    </div>
    
    <div id="match-result" class="game-result"></div>
  </div>

  <!-- GAME 3: METHOD MASTER -->
  <div id="game-identify" class="game-container">
    <h3>üîç Method Master - Choose the best solution method!</h3>
    <div class="game-stats">
      <div class="stat-item">
        <span class="stat-label">üìö Question</span>
        <span id="identify-progress" class="stat-value">1/5</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">‚úÖ Correct</span>
        <span id="identify-score" class="stat-value">0</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">‚≠ê Grade</span>
        <span id="identify-grade" class="stat-value">-</span>
      </div>
    </div>
    
    <div class="game-board">
      <div id="identify-question" class="game-question">Loading...</div>
      <div id="identify-options" class="game-options"></div>
    </div>
    
    <div id="identify-result" class="game-result"></div>
  </div>

  <!-- GAME 4: LIMIT RACE -->
  <div id="game-race" class="game-container">
    <h3>üèÅ Limit Race - Reach the finish line!</h3>
    <div class="game-stats">
      <div class="stat-item">
        <span class="stat-label">üèÜ Level</span>
        <span id="race-level" class="stat-value">1</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">‚è∞ Time</span>
        <span id="race-timer" class="stat-value">15s</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">üíù Lives</span>
        <span id="race-lives" class="stat-value">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span>
      </div>
    </div>
    
    <div class="race-track">
      <div class="race-car" id="race-car">üèéÔ∏è</div>
      <div class="finish-line">üèÅ</div>
    </div>
    
    <div class="game-board">
      <div id="race-question" class="game-question">Get ready to race!</div>
      <div id="race-options" class="game-options"></div>
    </div>
    
    <div style="text-align: center; margin-top: 20px;">
      <button id="race-start" onclick="startRaceGame()" style="font-size: 18px; padding: 15px 40px;">
        üèÅ START RACE
      </button>
    </div>
    
    <div id="race-result" class="game-result"></div>
  </div>

</section>

</div>

<script>
// Navigation
function showSec(id) {
  document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  event.target.classList.add('active');
  
  window.scrollTo({top: 0, behavior: 'smooth'});
}

function showGame(game) {
  document.querySelectorAll('.game-container').forEach(g => g.classList.remove('active-game'));
  document.querySelectorAll('.game-tab').forEach(t => t.classList.remove('active'));
  document.getElementById('game-' + game).classList.add('active-game');
  document.getElementById('tab-' + game).classList.add('active');
  
  // Initialize games
  if (game === 'identify') {
    if (shuffledIdentifyQuestions.length === 0) {
      shuffledIdentifyQuestions = shuffleArray(identifyQuestions);
    }
    loadIdentifyQuestion();
  }
  
  if (game === 'match') {
    initMatchGame();
  }
}

// Quiz System - BUG FIX #1: Fixed answers for Q3, Q7, Q10
let qScore = 0, qDone = new Set();
const qAns = {
  1: 13, 
  2: '5/3', 
  3: '\\sqrt{2}',  // ‚úÖ FIXED: Was '‚àö2', now matches button value '\sqrt{2}'
  4: 7, 
  5: -5, 
  6: '1/2', 
  7: '-20\\sqrt{3}/3',  // ‚úÖ FIXED: Was '-20‚àö3/3', now matches button value '-20\sqrt{3}/3'
  8: '5/2',
  9: -1,
  10: '\\sqrt{5/7}',  // ‚úÖ FIXED: Was '‚àö(5/7)', now matches button value '\sqrt{5/7}'
  11: 27,
  12: '+‚àû',
  13: 'x=-2, y=0'
};

function checkQ(q, ans, btn) {
  const fb = document.getElementById('f' + q);
  const ok = qAns[q] == ans;
  
  if (ok) {
    fb.className = 'quiz-fb correct show';
    fb.textContent = '‚úì Correct! Well done! üéâ';
    if (!qDone.has(q)) { 
      qScore++; 
      qDone.add(q); 
      btn.classList.add('celebrate');
    }
    btn.parentElement.querySelectorAll('button').forEach(b => b.disabled = true);
  } else {
    fb.className = 'quiz-fb incorrect show';
    fb.textContent = '‚úó Not quite! Try again or review the examples.';
  }
  
  if (qDone.size === 13) {
    const scoreDiv = document.getElementById('score');
    const percent = Math.round((qScore/13)*100);
    scoreDiv.textContent = `üéä Quiz Complete! Score: ${qScore}/13 (${percent}%)` + 
      (qScore >= 12 ? ' - Perfect! üèÜ' : qScore >= 10 ? ' - Excellent! üåü' : qScore >= 7 ? ' - Good job! üëç' : ' - Keep practicing! üí™');
    scoreDiv.style.display = 'block';
    scoreDiv.classList.add('celebrate');
  }
}

// Shuffle utility function
function shuffleArray(array) {
  const arr = [...array];
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

// ========== GAME 1: SPEED CHALLENGE ==========
let speedTimer, speedTime = 60, speedScore = 0, speedStreak = 0;
const speedQuestions = [
  {q: 'lim<sub>x‚Üí3</sub> (3x+4)/(x-2)', a: 13, opts: [13, 11, 15, 10]},
  {q: 'lim<sub>x‚Üí2</sub> (x¬≤+1)/(x¬≤-1)', a: '5/3', opts: ['5/3', '3/5', '1', '2']},
  {q: 'lim<sub>x‚Üí-2</sub> (x¬≤+3)', a: 7, opts: [7, 5, 9, 6]},
  {q: 'lim<sub>x‚Üí‚àû</sub> (2x+1)/(5x-2)', a: '2/5', opts: ['2/5', '1/2', '5/2', '0']},
  {q: 'lim<sub>x‚Üí2</sub> x¬≤', a: 4, opts: [4, 2, 8, 0]},
  {q: 'lim<sub>x‚Üí0</sub> (x+5)', a: 5, opts: [5, 0, 10, -5]},
  {q: 'lim<sub>x‚Üí3</sub> 2x', a: 6, opts: [6, 3, 9, 2]},
  {q: 'lim<sub>x‚Üí1</sub> (x¬≥)', a: 1, opts: [1, 0, 3, 2]},
  {q: 'lim<sub>x‚Üí-1</sub> x¬≤', a: 1, opts: [1, -1, 0, 2]},
  {q: 'lim<sub>x‚Üí‚àû</sub> 1/x', a: 0, opts: [0, 1, '‚àû', -1]},
  {q: 'lim<sub>x‚Üí-3</sub> ‚àö(2x+8)', a: '‚àö2', opts: ['‚àö2', '2', '0', '‚àö8']},
  {q: 'lim<sub>x‚Üí3</sub> (x¬≤-x-6)/(3-x)', a: -5, opts: [-5, 5, 0, -3]},
  {q: 'lim<sub>x‚Üí-3</sub> (x¬≥+27)/(x+3)', a: 27, opts: [27, 9, -27, 18]},
];

let currentSpeedQ = 0;
let shuffledSpeedQuestions = [];

function startSpeedGame() {
  speedScore = 0;
  speedStreak = 0;
  speedTime = 60;
  currentSpeedQ = 0;
  
  shuffledSpeedQuestions = shuffleArray(speedQuestions);
  
  document.getElementById('speed-score').textContent = '0';
  document.getElementById('speed-streak').textContent = '0';
  document.getElementById('speed-start').disabled = true;
  document.getElementById('speed-result').classList.remove('show');
  
  loadSpeedQuestion();
  
  speedTimer = setInterval(() => {
    speedTime--;
    document.getElementById('speed-timer').textContent = speedTime;
    
    if (speedTime <= 0) {
      endSpeedGame();
    }
  }, 1000);
}

function loadSpeedQuestion() {
  if (currentSpeedQ >= shuffledSpeedQuestions.length) {
    shuffledSpeedQuestions = shuffleArray(speedQuestions);
    currentSpeedQ = 0;
  }
  
  const q = shuffledSpeedQuestions[currentSpeedQ];
  document.getElementById('speed-question').innerHTML = q.q + ' = ?';
  
  const optionsDiv = document.getElementById('speed-options');
  optionsDiv.innerHTML = '';
  
  const shuffledOpts = shuffleArray(q.opts);
  
  shuffledOpts.forEach(opt => {
    const btn = document.createElement('button');
    btn.textContent = opt;
    btn.onclick = () => checkSpeedAnswer(opt, q.a);
    optionsDiv.appendChild(btn);
  });
}

// BUG FIX #2: Prevent scoring after time runs out
function checkSpeedAnswer(selected, correct) {
  // ‚úÖ FIXED: Check if time is up before allowing answers
  if (speedTime <= 0) return;
  
  if (selected == correct) {
    speedScore++;
    speedStreak++;
    document.getElementById('speed-score').textContent = speedScore;
    document.getElementById('speed-streak').textContent = speedStreak;
    currentSpeedQ++;
    loadSpeedQuestion();
  } else {
    speedStreak = 0;
    document.getElementById('speed-streak').textContent = '0';
  }
}

function endSpeedGame() {
  clearInterval(speedTimer);
  document.getElementById('speed-start').disabled = false;
  
  const result = document.getElementById('speed-result');
  result.className = 'game-result result-final show';
  
  let grade = '';
  if (speedScore >= 15) grade = 'üèÜ MASTER!';
  else if (speedScore >= 10) grade = 'üåü EXPERT!';
  else if (speedScore >= 5) grade = 'üëç GOOD!';
  else grade = 'üí™ KEEP PRACTICING!';
  
  result.innerHTML = `
    <div style="font-size: 28px; margin-bottom: 15px;">TIME'S UP!</div>
    <div>Final Score: <strong>${speedScore}</strong></div>
    <div style="margin-top: 10px; font-size: 24px;">${grade}</div>
  `;
}

// ========== GAME 2: MATCH GAME ==========
let matchSelected = null;
let matchCount = 0;
let matchMoves = 0;
let matchErrors = 0;

const matchProblems = [
  {id: 1, problem: 'lim<sub>x‚Üí2</sub> x¬≤', answer: '4'},
  {id: 2, problem: 'lim<sub>x‚Üí0</sub> 1/x¬≤', answer: '‚àû'},
  {id: 3, problem: 'lim<sub>x‚Üí‚àû</sub> 1/x', answer: '0'},
  {id: 4, problem: 'lim<sub>x‚Üí1</sub> (x¬≤-1)/(x-1)', answer: '2'},
  {id: 5, problem: 'lim<sub>x‚Üí3</sub> (x+1)', answer: '4'},
  {id: 6, problem: 'lim<sub>x‚Üí‚àû</sub> (2x+1)/(5x-2)', answer: '2/5'},
  {id: 7, problem: 'lim<sub>x‚Üí-3</sub> (x¬≥+27)/(x+3)', answer: '27'},
  {id: 8, problem: 'lim<sub>x‚Üí-2</sub> (x¬≤+3)', answer: '7'},
];

function initMatchGame() {
  const shuffledProblems = shuffleArray(matchProblems);
  const shuffledAnswers = shuffleArray(matchProblems);
  
  const problemColumn = document.querySelector('.match-column:first-child');
  const answerColumn = document.querySelector('.match-column:last-child');
  
  const problemItems = problemColumn.querySelectorAll('.match-item');
  const answerItems = answerColumn.querySelectorAll('.match-item');
  problemItems.forEach(item => item.remove());
  answerItems.forEach(item => item.remove());
  
  shuffledProblems.forEach((item, idx) => {
    const div = document.createElement('div');
    div.className = 'match-item';
    div.innerHTML = item.problem;
    div.setAttribute('data-pair', item.id);
    div.onclick = function() { selectMatch(this, 'p' + idx); };
    problemColumn.appendChild(div);
  });
  
  shuffledAnswers.forEach((item, idx) => {
    const div = document.createElement('div');
    div.className = 'match-item';
    div.innerHTML = item.answer;
    div.setAttribute('data-pair', item.id);
    div.onclick = function() { selectMatch(this, 'a' + idx); };
    answerColumn.appendChild(div);
  });
}

function selectMatch(element, id) {
  if (element.classList.contains('matched')) return;
  
  if (matchSelected === null) {
    document.querySelectorAll('.match-item').forEach(item => {
      item.classList.remove('selected');
    });
    element.classList.add('selected');
    matchSelected = {element, id, pair: element.dataset.pair};
  } else {
    matchMoves++;
    document.getElementById('match-moves').textContent = matchMoves;
    
    if (matchSelected.pair === element.dataset.pair) {
      matchSelected.element.classList.remove('selected');
      matchSelected.element.classList.add('matched');
      element.classList.add('matched');
      
      matchCount++;
      document.getElementById('match-score').textContent = matchCount + '/8';
      
      if (matchCount === 8) {
        const accuracy = Math.round((8 / matchMoves) * 100);
        document.getElementById('match-accuracy').textContent = accuracy + '%';
        
        setTimeout(() => {
          const result = document.getElementById('match-result');
          result.className = 'game-result result-final show';
          result.innerHTML = `
            <div style="font-size: 28px; margin-bottom: 15px;">üéâ COMPLETE!</div>
            <div>Moves: ${matchMoves} | Accuracy: ${accuracy}%</div>
            <div style="margin-top: 10px;">${accuracy >= 90 ? 'üèÜ PERFECT!' : accuracy >= 70 ? '‚≠ê GREAT!' : 'üëç GOOD JOB!'}</div>
          `;
        }, 500);
      }
      
      matchSelected = null;
    } else {
      matchErrors++;
      const accuracy = Math.round(((matchMoves - matchErrors) / matchMoves) * 100);
      document.getElementById('match-accuracy').textContent = accuracy + '%';
      
      element.classList.add('wrong');
      matchSelected.element.classList.add('wrong');
      
      setTimeout(() => {
        element.classList.remove('wrong', 'selected');
        matchSelected.element.classList.remove('wrong', 'selected');
        matchSelected = null;
      }, 600);
    }
  }
}

function resetMatchGame() {
  matchSelected = null;
  matchCount = 0;
  matchMoves = 0;
  matchErrors = 0;
  
  document.getElementById('match-score').textContent = '0/8';
  document.getElementById('match-moves').textContent = '0';
  document.getElementById('match-accuracy').textContent = '100%';
  document.getElementById('match-result').classList.remove('show');
  
  initMatchGame();
}

// ========== GAME 3: METHOD MASTER ==========
let identifyQuestions = [
  {
    q: 'lim<sub>x‚Üí3</sub> (x¬≤-9)/(x-3)',
    methods: ['Factorization', 'Direct Substitution', 'Conjugate', 'Highest Power'],
    correct: 0,
    explain: 'Factor to (x-3)(x+3)/(x-3) then cancel!'
  },
  {
    q: 'lim<sub>x‚Üí0</sub> (‚àö(x+1)-1)/x',
    methods: ['Conjugate Multiplication', 'Direct Substitution', 'Factorization', 'Highest Power'],
    correct: 0,
    explain: 'Multiply by conjugate ‚àö(x+1)+1!'
  },
  {
    q: 'lim<sub>x‚Üí‚àû</sub> (3x¬≤+1)/(x¬≤-2)',
    methods: ['Divide by Highest Power', 'Factorization', 'Direct Substitution', 'Conjugate'],
    correct: 0,
    explain: 'Divide all terms by x¬≤!'
  },
  {
    q: 'lim<sub>x‚Üí5</sub> (2x+3)',
    methods: ['Direct Substitution', 'Factorization', 'Conjugate', 'Highest Power'],
    correct: 0,
    explain: 'Just plug in x=5!'
  },
  {
    q: 'lim<sub>x‚Üí-3</sub> (x¬≥+27)/(x+3)',
    methods: ['Factorization', 'Direct Substitution', 'Conjugate', 'Highest Power'],
    correct: 0,
    explain: 'Factor using sum of cubes!'
  }
];

let identifyIndex = 0;
let identifyCorrect = 0;
let shuffledIdentifyQuestions = [];
let currentMethodsMap = {};

function loadIdentifyQuestion() {
  if (identifyIndex >= shuffledIdentifyQuestions.length) {
    showIdentifyResults();
    return;
  }
  
  const q = shuffledIdentifyQuestions[identifyIndex];
  document.getElementById('identify-progress').textContent = `${identifyIndex + 1}/5`;
  document.getElementById('identify-question').innerHTML = q.q;
  
  const optionsDiv = document.getElementById('identify-options');
  optionsDiv.innerHTML = '';
  
  const methodsWithIndices = q.methods.map((method, idx) => ({
    method: method,
    originalIdx: idx
  }));
  
  const shuffledMethods = shuffleArray(methodsWithIndices);
  
  const correctMethod = q.methods[q.correct];
  const correctNewIdx = shuffledMethods.findIndex(item => item.method === correctMethod);
  currentMethodsMap[identifyIndex] = correctNewIdx;
  
  shuffledMethods.forEach((item, idx) => {
    const btn = document.createElement('button');
    btn.textContent = item.method;
    btn.onclick = () => checkIdentifyAnswer(idx);
    optionsDiv.appendChild(btn);
  });
  
  document.getElementById('identify-result').classList.remove('show');
}

function checkIdentifyAnswer(selected) {
  const q = shuffledIdentifyQuestions[identifyIndex];
  const result = document.getElementById('identify-result');
  const correctIdx = currentMethodsMap[identifyIndex];
  
  if (selected === correctIdx) {
    identifyCorrect++;
    result.className = 'game-result result-correct show';
    result.innerHTML = `‚úÖ Correct! ${q.explain}`;
  } else {
    result.className = 'game-result result-wrong show';
    result.innerHTML = `‚ùå Not quite! The best method is: <strong>${q.methods[q.correct]}</strong><br>${q.explain}`;
  }
  
  document.getElementById('identify-score').textContent = identifyCorrect;
  
  document.querySelectorAll('#identify-options button').forEach(btn => btn.disabled = true);
  
  setTimeout(() => {
    identifyIndex++;
    loadIdentifyQuestion();
  }, 3000);
}

function showIdentifyResults() {
  const result = document.getElementById('identify-result');
  const grade = identifyCorrect === 5 ? 'A+' : identifyCorrect === 4 ? 'A' : identifyCorrect === 3 ? 'B' : 'C';
  
  result.className = 'game-result result-final show';
  result.innerHTML = `
    <div style="font-size: 28px; margin-bottom: 15px;">üéì QUIZ COMPLETE!</div>
    <div>Score: ${identifyCorrect}/5 | Grade: <strong>${grade}</strong></div>
    <div style="margin-top: 15px;">
      <button onclick="resetIdentifyGame()">üîÑ Try Again</button>
    </div>
  `;
  
  document.getElementById('identify-grade').textContent = grade;
  document.getElementById('identify-options').innerHTML = '';
  document.getElementById('identify-question').innerHTML = 'All done!';
}

function resetIdentifyGame() {
  identifyIndex = 0;
  identifyCorrect = 0;
  currentMethodsMap = {};
  shuffledIdentifyQuestions = shuffleArray(identifyQuestions);
  document.getElementById('identify-score').textContent = '0';
  document.getElementById('identify-grade').textContent = '-';
  loadIdentifyQuestion();
}

// ========== GAME 4: LIMIT RACE ==========
let raceTimer, raceTime = 15, raceLevel = 1, raceLives = 3, racePosition = 0;
const raceQuestions = [
  {q: 'lim<sub>x‚Üí3</sub> (3x+4)/(x-2)', a: 13, opts: [13, 11, 15]},
  {q: 'lim<sub>x‚Üí-2</sub> (x¬≤+3)', a: 7, opts: [7, 5, 9]},
  {q: 'lim<sub>x‚Üí2</sub> x¬≤', a: 4, opts: [4, 2, 8]},
  {q: 'lim<sub>x‚Üí0</sub> (x+3)', a: 3, opts: [3, 0, 1]},
  {q: 'lim<sub>x‚Üí1</sub> x¬≥', a: 1, opts: [1, 0, 3]},
  {q: 'lim<sub>x‚Üí3</sub> (x+1)', a: 4, opts: [4, 3, 5]},
  {q: 'lim<sub>x‚Üí-1</sub> x¬≤', a: 1, opts: [1, -1, 0]},
];

let currentRaceQ = 0;
let shuffledRaceQuestions = [];

function startRaceGame() {
  raceLevel = 1;
  raceLives = 3;
  racePosition = 0;
  raceTime = 15;
  currentRaceQ = 0;
  
  shuffledRaceQuestions = shuffleArray(raceQuestions);
  
  document.getElementById('race-level').textContent = '1';
  document.getElementById('race-lives').textContent = '‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è';
  document.getElementById('race-car').style.left = '0%';
  document.getElementById('race-start').disabled = true;
  document.getElementById('race-result').classList.remove('show');
  
  loadRaceQuestion();
  
  raceTimer = setInterval(() => {
    raceTime--;
    document.getElementById('race-timer').textContent = raceTime + 's';
    
    if (raceTime <= 0) {
      loseLife();
    }
  }, 1000);
}

function loadRaceQuestion() {
  if (currentRaceQ >= shuffledRaceQuestions.length) {
    shuffledRaceQuestions = shuffleArray(raceQuestions);
    currentRaceQ = 0;
  }
  
  const q = shuffledRaceQuestions[currentRaceQ];
  document.getElementById('race-question').innerHTML = q.q + ' = ?';
  
  const optionsDiv = document.getElementById('race-options');
  optionsDiv.innerHTML = '';
  
  const shuffledOpts = shuffleArray(q.opts);
  
  shuffledOpts.forEach(opt => {
    const btn = document.createElement('button');
    btn.textContent = opt;
    btn.disabled = false; // ‚úÖ FIX: Ensure buttons start enabled
    btn.onclick = () => checkRaceAnswer(opt, q.a);
    optionsDiv.appendChild(btn);
  });
}

function checkRaceAnswer(selected, correct) {
  // ‚úÖ FIX: Don't allow answers when lives are 0
  if (raceLives <= 0) return;
  
  if (selected == correct) {
    racePosition += 20;
    document.getElementById('race-car').style.left = racePosition + '%';
    
    if (racePosition >= 100) {
      winRace();
    } else {
      raceTime = 15;
      currentRaceQ++;
      loadRaceQuestion();
    }
  } else {
    loseLife();
  }
}

function loseLife() {
  raceLives--;
  const hearts = '‚ù§Ô∏è'.repeat(raceLives) + 'üñ§'.repeat(3 - raceLives);
  document.getElementById('race-lives').textContent = hearts;
  
  if (raceLives <= 0) {
    clearInterval(raceTimer);
    // ‚úÖ FIX: Disable all answer buttons when game over
    document.querySelectorAll('#race-options button').forEach(btn => btn.disabled = true);
    endRaceGame(false);
  } else {
    raceTime = 15;
  }
}
  
function winRace() {
  clearInterval(raceTimer);
  raceLevel++;
  document.getElementById('race-level').textContent = raceLevel;
  
  const result = document.getElementById('race-result');
  result.className = 'game-result result-correct show celebrate';
  result.innerHTML = `
    <div style="font-size: 28px;">üèÅ LEVEL ${raceLevel - 1} COMPLETE!</div>
    <div style="margin-top: 15px;">
      <button onclick="continueRace()">‚û°Ô∏è Next Level</button>
      <button onclick="endRaceGame(true)">üèÜ Finish</button>
    </div>
  `;
}

function continueRace() {
  racePosition = 0;
  raceTime = Math.max(10, 15 - raceLevel);
  document.getElementById('race-car').style.left = '0%';
  document.getElementById('race-result').classList.remove('show');
  loadRaceQuestion();
  
  raceTimer = setInterval(() => {
    raceTime--;
    document.getElementById('race-timer').textContent = raceTime + 's';
    if (raceTime <= 0) loseLife();
  }, 1000);
}

function endRaceGame(won) {
  clearInterval(raceTimer);
  document.getElementById('race-start').disabled = false;
  
  const result = document.getElementById('race-result');
  result.className = 'game-result result-final show';
  
  if (won) {
    result.innerHTML = `
      <div style="font-size: 28px; margin-bottom: 15px;">üèÜ RACE COMPLETE!</div>
      <div>Final Level: <strong>${raceLevel}</strong></div>
      <div style="margin-top: 10px; font-size: 24px;">CHAMPION! üéâ</div>
    `;
  } else {
    result.innerHTML = `
      <div style="font-size: 28px; margin-bottom: 15px;">üèÅ GAME OVER</div>
      <div>Reached Level: <strong>${raceLevel}</strong></div>
      <div style="margin-top: 10px;">Try again to beat your record!</div>
    `;
  }
}

// Initialize
window.addEventListener('load', () => {
  shuffledIdentifyQuestions = shuffleArray(identifyQuestions);
  loadIdentifyQuestion();
  initMatchGame();
});
</script>

</body>
</html>




















